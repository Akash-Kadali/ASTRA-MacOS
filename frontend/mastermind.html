<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <meta name="theme-color" content="#0B1220"/>
  <title>ASTRA · HIREX</title>
  <meta name="description" content="MasterMind — a standalone assistant for research, coding, writing, and brainstorming."/>
  <meta name="author" content="Sri Akash Kadali"/>
  <meta property="og:title" content="MasterMind | ASTRA — Standalone Assistant"/>
  <meta property="og:type" content="website"/>

  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self' blob: data:;
          img-src 'self' data: blob:;
          style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
          font-src 'self' data: https://fonts.gstatic.com;
          script-src 'self' 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval';
          connect-src 'self' blob:
                       http://127.0.0.1:8000 ws://127.0.0.1:8000
                       http://0.0.0.0:8000   ws://0.0.0.0:8000
                       http://localhost:8000  ws://localhost:8000
                       https://api.openai.com;
          frame-src 'self' blob: data: about:;
          child-src 'self' blob:;
          worker-src 'self' blob:;
          media-src 'self' blob: data:;
          object-src 'none';
          base-uri 'self';
          frame-ancestors 'self';
        "/>

  <link rel="icon" type="image/png" href="/static/assets/favicon.png"/>
  <link rel="preload" href="/static/assets/logo.png" as="image"/>

  <!-- Google Sans + JetBrains Mono -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet"/>

  <link rel="stylesheet" href="/static/css/animations.css?v=2.1.2"/>

<style>
:root{
  /* Surfaces */
  --bg0:#0B1220;
  --bg1:#0E1629;

  /* Text */
  --text:#EAF0FF;
  --muted:rgba(234,240,255,.72);
  --dim:rgba(234,240,255,.42);

  /* Accents */
  --accent:#7AA7FF;
  --ok:#34D399;
  --warn:#FBBF24;
  --danger:#FB7185;

  /* Lines + shadows */
  --line:rgba(255,255,255,.10);
  --shadow:0 18px 50px rgba(0,0,0,.45);

  /* Type */
  --ui:"Google Sans",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  --mono:"JetBrains Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;

  /* Layout */
  --sidebar:268px;
  --topbar:52px;
  --maxw:780px;

  /* Radius */
  --r:16px;
  --r2:12px;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
::selection{background:rgba(122,167,255,.35);color:#fff;}

body{
  font-family:var(--ui);
  background:
    radial-gradient(900px 520px at 20% -10%, rgba(122,167,255,.18), transparent 60%),
    radial-gradient(900px 520px at 85% 22%, rgba(185,199,255,.10), transparent 60%),
    radial-gradient(700px 500px at 65% 110%, rgba(52,211,153,.08), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  color:var(--text);
  font-size:14px;
  line-height:1.55;
  overflow-x:hidden;
  min-height:100vh;
  isolation:isolate;
}

/* Subtle noise */
.grain{
  position:fixed;inset:0;z-index:1;pointer-events:none;opacity:.028;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:220px 220px;
}

/* Ambient blobs */
.ambient{position:fixed;pointer-events:none;z-index:0;border-radius:50%;filter:blur(120px);opacity:.9;}
.amb-1{
  width:520px;height:520px;top:-220px;left:calc(var(--sidebar) - 120px);
  background:radial-gradient(circle,rgba(122,167,255,.26),transparent 70%);
  animation:drift 26s ease-in-out infinite alternate;
}
.amb-2{
  width:520px;height:520px;bottom:-220px;right:4%;
  background:radial-gradient(circle,rgba(52,211,153,.14),transparent 72%);
  animation:drift 30s ease-in-out infinite alternate-reverse;
}
@keyframes drift{from{transform:translate(0,0);}to{transform:translate(30px,34px);}}

/* ── TOPBAR ── */
.topbar-strip{
  position:fixed;top:0;left:var(--sidebar);right:0;height:var(--topbar);
  z-index:40;
  background:rgba(15,22,41,.72);
  border-bottom:1px solid var(--line);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 1.25rem;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
.topbar-left,.topbar-right{display:flex;align-items:center;gap:1rem;}
.sys-online{
  display:flex;align-items:center;gap:.5rem;
  font-size:12px;font-weight:700;color:rgba(234,240,255,.72);
}
.sys-online::before{
  content:"";width:8px;height:8px;border-radius:999px;
  background:var(--ok);
  box-shadow:0 0 0 4px rgba(52,211,153,.10);
}
.topbar-tag{font-size:12px;color:var(--dim);display:flex;align-items:center;gap:.35rem;}
.topbar-tag b{color:rgba(234,240,255,.78);font-weight:700;}
#sys-clock{font-variant-numeric:tabular-nums;font-size:12px;color:rgba(234,240,255,.72);}

/* ── SIDEBAR ── */
.sidebar{
  position:fixed;top:0;left:0;width:var(--sidebar);height:100vh;
  z-index:50;
  background:rgba(15,22,41,.78);
  border-right:1px solid var(--line);
  display:flex;flex-direction:column;overflow:hidden;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
.sidebar::after{
  content:"";position:absolute;inset:0;pointer-events:none;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), transparent 30%),
    radial-gradient(800px 380px at 20% 0%, rgba(122,167,255,.10), transparent 60%);
  opacity:.8;
}

.brand{
  position:relative;z-index:2;
  padding:1.15rem 1.1rem 1rem;
  border-bottom:1px solid var(--line);
  display:flex;flex-direction:column;gap:.5rem;
}
.brand-row{display:flex;align-items:center;gap:.8rem;}
.brand-logo{width:44px;height:44px;flex-shrink:0;border-radius:14px;overflow:hidden;}
.brand-logo img{
  width:44px;height:44px;object-fit:contain;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
}
.brand-wordmark{display:flex;flex-direction:column;gap:.08rem;}
.brand-name{font-size:16px;font-weight:800;letter-spacing:.06em;color:var(--text);}
.brand-tagline{font-size:12px;color:var(--dim);}
.brand-sysinfo{display:flex;gap:.45rem;flex-wrap:wrap;margin-top:.15rem;}
.sys-badge{
  font-family:var(--mono);font-size:11px;
  color:rgba(234,240,255,.75);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  padding:.18em .65em;
  background:rgba(255,255,255,.05);
}

.vnav{list-style:none;padding:.75rem .6rem;flex:1;overflow-y:auto;position:relative;z-index:2;}
.vnav::-webkit-scrollbar{width:6px;}
.vnav::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px;}
.nav-group-label{
  font-size:11px;font-weight:800;letter-spacing:.10em;text-transform:uppercase;
  color:rgba(234,240,255,.42);padding:.75rem .7rem .35rem;
}
.nav-group-label::after{display:none;}
.vnav a{
  display:flex;align-items:center;gap:.7rem;
  color:rgba(234,240,255,.72);
  text-decoration:none;
  font-size:13px;font-weight:700;
  padding:.62rem .75rem;
  border-radius:12px;border:1px solid transparent;
  margin-bottom:.2rem;
  transition:background .15s,border-color .15s,transform .12s,color .15s;
}
.vnav a .nav-ico{width:22px;text-align:center;opacity:.7;font-size:.92rem;}
.vnav a:hover{
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.10);
  transform:translateY(-1px);
  color:var(--text);
}
.vnav a.active-link{
  background:linear-gradient(90deg, rgba(122,167,255,.22), rgba(255,255,255,.06));
  border-color:rgba(122,167,255,.25);
  color:var(--text);
}
.vnav a.active-link::after,.vnav a.active-link::before{display:none;}

.sidebar-foot{
  position:relative;z-index:2;
  padding:.9rem;border-top:1px solid var(--line);
  display:flex;flex-direction:column;gap:.55rem;
}
.btn-exec{
  width:100%;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg, rgba(122,167,255,.22), rgba(122,167,255,.14));
  border:1px solid rgba(122,167,255,.28);
  color:var(--text);
  font-family:var(--ui);
  font-size:12px;font-weight:800;letter-spacing:.06em;
  padding:.72rem .9rem;border-radius:12px;cursor:pointer;
  transition:transform .12s,box-shadow .2s,background .2s;
  box-shadow:0 10px 22px rgba(0,0,0,.20);
}
.btn-exec::before{display:none;}
.btn-exec:hover{
  transform:translateY(-1px);
  box-shadow:0 0 0 4px rgba(122,167,255,.10), 0 14px 32px rgba(0,0,0,.26);
}
.btn-exec span{position:relative;z-index:1;}

.btn-kill{
  width:100%;
  display:flex;align-items:center;justify-content:center;
  background:rgba(251,113,133,.10);
  border:1px solid rgba(251,113,133,.22);
  color:rgba(251,113,133,.92);
  font-family:var(--ui);
  font-size:12px;font-weight:900;letter-spacing:.06em;
  padding:.7rem .9rem;border-radius:12px;cursor:pointer;
  transition:transform .12s,box-shadow .2s,background .2s;
}
.btn-kill:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(251,113,133,.10);}
.btn-kill:disabled{opacity:.45;cursor:not-allowed;transform:none;}

/* ── HAMBURGER ── */
.hamburger{
  display:none;position:fixed;top:12px;left:12px;z-index:60;
  background:rgba(15,22,41,.72);
  border:1px solid rgba(255,255,255,.10);
  color:var(--text);
  font-size:1rem;padding:.46rem .66rem;border-radius:12px;
  cursor:pointer;backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);
}
@media(max-width:700px){
  .hamburger{display:block;}
  .sidebar{left:-100%;width:82%;transition:left .28s ease;}
  body.nav-open .sidebar{left:0;}
  main.console,.topbar-strip,footer{margin-left:0!important;left:0!important;}
}

/* ── MAIN ── */
main.console{
  margin-left:var(--sidebar);
  padding:calc(var(--topbar) + 1rem) 1.5rem 0;
  position:relative;z-index:2;
  min-height:100vh;
  display:flex;flex-direction:column;
}

/* ── CHAT CONTROLS BAR ── */
.chat-controls{
  width:100%;max-width:var(--maxw);margin:0 auto .85rem;
  position:sticky;top:var(--topbar);z-index:30;
  background:rgba(15,22,41,.55);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:.75rem .85rem;
  display:flex;gap:.55rem;align-items:center;flex-wrap:wrap;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  box-shadow:0 10px 30px rgba(0,0,0,.20);
}

.ctrl-select{
  background:rgba(255,255,255,.05);
  color:rgba(234,240,255,.92);
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  padding:.52rem .75rem;
  font-family:var(--ui);
  font-size:12px;
  font-weight:700;
  appearance:none;
  outline:none;
  cursor:pointer;
  height:34px;
  transition:border-color .2s,box-shadow .2s,background .2s;
}
.ctrl-select:focus{
  border-color:rgba(122,167,255,.30);
  box-shadow:0 0 0 4px rgba(122,167,255,.12);
  background:rgba(255,255,255,.06);
}
option{background:#0C1426;color:rgba(234,240,255,.92);}

.ctrl-sep{width:1px;height:18px;background:rgba(255,255,255,.12);flex-shrink:0;}

/* Context toggle */
.ctx-toggle-group{display:flex;align-items:center;gap:.5rem;}
.ctx-toggle-lbl{font-size:12px;font-weight:800;color:rgba(234,240,255,.65);}
.switch{position:relative;width:40px;height:22px;flex-shrink:0;}
.switch input{opacity:0;width:0;height:0;position:absolute;}
.slider{
  position:absolute;inset:0;cursor:pointer;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  transition:.22s;
}
.slider::before{
  content:"";position:absolute;width:14px;height:14px;left:4px;top:3px;
  background:rgba(234,240,255,.55);
  border-radius:999px;
  transition:.22s;
}
input:checked+.slider{
  background:rgba(122,167,255,.18);
  border-color:rgba(122,167,255,.30);
  box-shadow:0 0 0 4px rgba(122,167,255,.10);
}
input:checked+.slider::before{transform:translateX(18px);background:rgba(234,240,255,.92);}

/* Control buttons */
.ctrl-btn{
  display:flex;align-items:center;gap:.35rem;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(234,240,255,.72);
  font-family:var(--ui);
  font-size:12px;
  font-weight:800;
  padding:.5rem .8rem;
  border-radius:12px;
  height:34px;
  cursor:pointer;
  transition:transform .12s,background .2s,border-color .2s,box-shadow .2s;
}
.ctrl-btn:hover{
  transform:translateY(-1px);
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.14);
}
.ctrl-btn.accent{
  background:linear-gradient(180deg, rgba(122,167,255,.28), rgba(122,167,255,.14));
  border-color:rgba(122,167,255,.26);
  color:rgba(234,240,255,.92);
}
.ctrl-btn.accent::before{display:none;}
.ctrl-btn.accent:hover{box-shadow:0 0 0 4px rgba(122,167,255,.10);}

/* ── SESSIONS TRAY ── */
#session_list{
  width:100%;max-width:var(--maxw);margin:0 auto .75rem;
  display:flex;gap:.45rem;flex-wrap:wrap;
}
.session-item{
  font-family:var(--ui);
  font-size:12px;
  font-weight:800;
  padding:.45rem .8rem;
  border:1px solid rgba(255,255,255,.10);
  border-radius:999px;
  background:rgba(255,255,255,.04);
  color:rgba(234,240,255,.72);
  cursor:pointer;
  transition:transform .12s,background .2s,border-color .2s,box-shadow .2s;
}
.session-item:hover{
  transform:translateY(-1px);
  border-color:rgba(255,255,255,.14);
  background:rgba(255,255,255,.06);
}
.session-item.active{
  border-color:rgba(122,167,255,.28);
  background:rgba(122,167,255,.14);
  color:rgba(234,240,255,.92);
  box-shadow:0 0 0 4px rgba(122,167,255,.10);
}

/* ── CHAT STREAM ── */
#chat_stream{
  width:100%;max-width:var(--maxw);margin:0 auto;
  flex:1;
  display:flex;flex-direction:column;
  gap:.85rem;
  padding:.5rem 0 1rem;
  overflow-y:auto;
}
#chat_stream::-webkit-scrollbar{width:8px;}
#chat_stream::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px;}

/* Message rows */
.msg-row{display:flex;gap:.75rem;align-items:flex-start;animation:msg-in .22s ease both;}
@keyframes msg-in{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:none;}}
.msg-row.user{flex-direction:row-reverse;}

/* Avatar */
.avatar{
  width:32px;height:32px;border-radius:14px;
  display:flex;align-items:center;justify-content:center;
  font-size:12px;font-weight:900;
  flex-shrink:0;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.05);
  color:rgba(234,240,255,.85);
  font-family:var(--ui);
}
.msg-row.user .avatar{
  background:rgba(251,191,36,.10);
  border-color:rgba(251,191,36,.20);
  color:rgba(251,191,36,.92);
}

/* Bubble */
.bubble{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:.85rem 1rem;
  color:rgba(234,240,255,.88);
  font-family:var(--ui);
  font-size:14px;
  line-height:1.65;
  max-width:calc(var(--maxw) - 52px);
  word-break:break-word;
  overflow-wrap:anywhere;
  position:relative;
  box-shadow:0 10px 26px rgba(0,0,0,.18);
}
.bubble::before{
  content:attr(data-sender);
  display:block;
  font-size:12px;
  font-weight:800;
  color:rgba(234,240,255,.65);
  margin-bottom:.45rem;
}
.msg-row.user .bubble{
  background:rgba(251,191,36,.06);
  border-color:rgba(251,191,36,.14);
}
.msg-row.user .bubble::before{color:rgba(251,191,36,.92);}

/* Typing */
.bubble.typing{
  background:rgba(251,191,36,.06);
  border-color:rgba(251,191,36,.14);
  color:rgba(251,191,36,.92);
}
.typing-dots{display:inline-flex;gap:.3rem;align-items:center;}
.typing-dots span{
  width:6px;height:6px;border-radius:999px;
  background:rgba(251,191,36,.92);
  animation:typing-bounce .9s ease-in-out infinite;
}
.typing-dots span:nth-child(2){animation-delay:.18s;}
.typing-dots span:nth-child(3){animation-delay:.36s;}
@keyframes typing-bounce{0%,80%,100%{transform:translateY(0);opacity:.4;}40%{transform:translateY(-4px);opacity:1;}}

/* Code blocks inside bubble */
.bubble pre,.bubble code{
  font-family:var(--mono);
  background:rgba(122,167,255,.10);
  border:1px solid rgba(122,167,255,.16);
  border-radius:12px;
}
.bubble pre{padding:.7rem .85rem;overflow-x:auto;margin:.55rem 0;}
.bubble code{padding:.12em .35em;}
.bubble pre code{background:none;border:none;padding:0;}

/* ── COMPOSER ── */
.composer{
  position:sticky;bottom:0;
  width:100%;
  background:linear-gradient(to top, rgba(11,18,32,.92) 70%, transparent);
  padding:1rem 0 1.2rem;
  z-index:20;
}

.composer-bar{
  width:100%;max-width:var(--maxw);margin:0 auto;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:.85rem .95rem;
  display:flex;gap:.75rem;align-items:flex-end;
  box-shadow:0 -4px 24px rgba(0,0,0,.25);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  transition:border-color .2s,box-shadow .2s,background .2s;
}
.composer-bar:focus-within{
  border-color:rgba(122,167,255,.28);
  box-shadow:0 0 0 4px rgba(122,167,255,.10), 0 -4px 24px rgba(0,0,0,.25);
  background:rgba(255,255,255,.05);
}
.composer-bar::before,.composer-bar::after{display:none;}

textarea#chat_input{
  flex:1;min-height:44px;max-height:200px;
  background:transparent;border:none;outline:none;
  color:rgba(234,240,255,.92);
  font-family:var(--ui);
  font-size:14px;line-height:1.55;
  resize:none;
}
textarea#chat_input::placeholder{color:rgba(234,240,255,.45);}

.btn-send{
  display:flex;align-items:center;justify-content:center;gap:.4rem;
  background:linear-gradient(180deg, rgba(122,167,255,.30), rgba(122,167,255,.16));
  border:1px solid rgba(122,167,255,.26);
  color:rgba(234,240,255,.92);
  font-family:var(--ui);
  font-size:12px;font-weight:900;letter-spacing:.06em;
  padding:.68rem 1rem;border-radius:12px;
  cursor:pointer;
  flex-shrink:0;align-self:flex-end;
  transition:transform .12s,box-shadow .2s,background .2s;
}
.btn-send::before{display:none;}
.btn-send:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(122,167,255,.10);}
.btn-send:disabled{opacity:.45;cursor:not-allowed;transform:none;}

.composer-hint{
  width:100%;max-width:var(--maxw);margin:.55rem auto 0;
  font-family:var(--ui);font-size:12px;
  color:rgba(234,240,255,.45);
  text-align:center;
}
.composer-hint kbd{
  border:1px solid rgba(255,255,255,.12);
  border-radius:8px;
  padding:.15em .5em;
  color:rgba(234,240,255,.72);
  font-family:var(--mono);
  font-size:11px;
  background:rgba(255,255,255,.04);
}

/* Footer */
footer{
  margin-left:var(--sidebar);
  padding:1rem 2rem;
  border-top:1px solid rgba(255,255,255,.10);
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:.5rem;
  font-size:12px;color:rgba(234,240,255,.55);
  background:rgba(15,22,41,.65);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
footer b{color:rgba(234,240,255,.78);}
.ver-tag{
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.05);
  color:rgba(234,240,255,.75);
  padding:.25em .75em;border-radius:999px;
  font-family:var(--mono);font-size:11px;
}

/* Toast */
#toast{
  position:fixed;left:50%;transform:translateX(-50%);bottom:18px;
  background:rgba(15,22,41,.85);
  border:1px solid rgba(255,255,255,.12);
  color:rgba(234,240,255,.86);
  padding:.7rem 1.05rem;
  border-radius:12px;
  display:none;z-index:9999;
  font-family:var(--ui);font-size:13px;font-weight:800;
  box-shadow:0 18px 44px rgba(0,0,0,.28);
}

/* FAB */
.shutdown-fab{
  position:fixed;right:18px;bottom:18px;z-index:40;
  width:44px;height:44px;border-radius:14px;
  background:rgba(251,113,133,.10);
  border:1px solid rgba(251,113,133,.22);
  color:rgba(251,113,133,.92);
  display:flex;align-items:center;justify-content:center;font-size:1rem;
  cursor:pointer;transition:transform .12s,box-shadow .2s,background .2s;
}
.shutdown-fab:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(251,113,133,.10), 0 18px 44px rgba(0,0,0,.28);}
.shutdown-fab:disabled{opacity:.45;cursor:not-allowed;transform:none;}

/* Responsive */
@media(max-width:900px){
  main.console{padding-left:1.25rem;padding-right:1.25rem;}
  .chat-controls{gap:.4rem;}
}
@media(max-width:500px){
  .ctrl-select{font-size:12px;padding:.5rem .6rem;}
}
</style>
</head>

<body class="glass-page">

<div class="grain" aria-hidden="true"></div>
<div class="ambient amb-1" aria-hidden="true"></div>
<div class="ambient amb-2" aria-hidden="true"></div>

<button id="nav-toggle" class="hamburger" aria-label="Toggle navigation" aria-controls="sidebar" aria-expanded="false">☰</button>

<aside class="sidebar" id="sidebar" role="navigation" aria-label="Primary">
  <div class="brand">
    <div class="brand-row">
      <div class="brand-logo">
        <img src="/static/assets/logo.png" alt="ASTRA" loading="lazy"/>
      </div>
      <div class="brand-wordmark">
        <span class="brand-name">ASTRA</span>
        <span class="brand-tagline">AI Career Ops System</span>
      </div>
    </div>
    <div class="brand-sysinfo">
      <span class="sys-badge">v1.0.0</span>
      <span class="sys-badge">GPT-4o</span>
      <span class="sys-badge">ONLINE</span>
    </div>
  </div>

  <ul class="vnav">
    <li class="nav-group-label">Core</li>
    <li><a href="/index.html"><span class="nav-ico">⬡</span> HIREX</a></li>
    <li><a href="/preview.html"><span class="nav-ico">◧</span> Preview</a></li>
    <li><a href="/coverletter.html"><span class="nav-ico">◈</span> Cover Letter</a></li>

    <li class="nav-group-label">Intelligence</li>
    <li><a href="/talk.html"><span class="nav-ico">◎</span> Talk to HIREX</a></li>
    <li><a href="/mastermind.html" class="active-link" aria-current="page"><span class="nav-ico">◉</span> MasterMind</a></li>
    <li><a href="/superhuman.html"><span class="nav-ico">◈</span> SuperHuman</a></li>

    <li class="nav-group-label">Analytics</li>
    <li><a href="/dashboard.html"><span class="nav-ico">▦</span> Dashboard</a></li>
    <li><a href="/genie.html"><span class="nav-ico">◐</span> Genie</a></li>
  </ul>

  <div class="sidebar-foot">
    <button class="btn-exec" type="button" onclick="document.getElementById('chat_input').focus()">
      <span>Focus terminal</span>
    </button>
    <button id="shutdown-btn" class="btn-kill" type="button">⏻ Kill server</button>
  </div>
</aside>

<div class="topbar-strip" role="status">
  <div class="topbar-left">
    <span class="sys-online">Online</span>
    <span class="topbar-tag">Module <b>MasterMind</b></span>
    <span class="topbar-tag">Engine <b>v1.0.0</b></span>
  </div>
  <div class="topbar-right">
    <span class="topbar-tag">Session <b id="session-id">—</b></span>
    <span id="sys-clock">—</span>
  </div>
</div>

<main id="content" class="console" role="main">

  <div class="chat-controls" role="toolbar" aria-label="Chat settings">

    <select id="persona" class="ctrl-select" aria-label="Assistant persona">
      <option value="General" selected>General</option>
      <option value="Researcher">Researcher</option>
      <option value="CodeHelper">Code Helper</option>
      <option value="DataAnalyst">Data Analyst</option>
      <option value="Writer">Writer</option>
    </select>

    <select id="model" class="ctrl-select" aria-label="Model">
      <option value="gpt-4o-mini" selected>gpt-4o-mini</option>
      <option value="gpt-4o">gpt-4o</option>
    </select>

    <select id="tone" class="ctrl-select" aria-label="Tone">
      <option value="balanced" selected>Balanced</option>
      <option value="friendly">Friendly</option>
      <option value="formal">Formal</option>
      <option value="concise">Concise</option>
      <option value="creative">Creative</option>
    </select>

    <div class="ctrl-sep"></div>

    <div class="ctx-toggle-group">
      <label class="switch" title="Use context" aria-label="Use context toggle">
        <input type="checkbox" id="use_context" checked/>
        <span class="slider" aria-hidden="true"></span>
      </label>
      <span class="ctx-toggle-lbl">Context</span>
    </div>

    <div class="ctrl-sep"></div>

    <button id="refresh_sessions" class="ctrl-btn" type="button">Refresh</button>
    <button id="new_session" class="ctrl-btn accent" type="button"><span>New chat</span></button>
  </div>

  <div id="session_list" aria-label="Sessions"></div>

  <div id="chat_stream" class="chat-stream" aria-live="polite" role="log" aria-label="Conversation">
    <div class="msg-row bot">
      <div class="avatar" aria-hidden="true">MM</div>
      <div class="bubble" data-sender="MasterMind">
// MasterMind online. Research, code, writing, strategy — all accepted.
// Select a persona above or start typing. Ctrl+Enter to send.
      </div>
    </div>
  </div>

  <div class="composer" role="region" aria-label="Message composer">
    <div class="composer-bar">
      <textarea
        id="chat_input"
        placeholder="Message MasterMind…"
        aria-label="Message input"
        rows="2"
      ></textarea>
      <button id="send_btn" class="btn-send" type="button" aria-label="Send message">
        <span>Send</span>
      </button>
    </div>
    <div class="composer-hint">
      <kbd>Ctrl</kbd> / <kbd>Cmd</kbd> + <kbd>Enter</kbd> to send &nbsp;·&nbsp; Shift+Enter for new line
    </div>
  </div>

</main>

<footer>
  <span>© 2025 <b>ASTRA</b> — <b>Sri Akash Kadali</b></span>
  <span>FastAPI · OpenAI</span>
  <span class="ver-tag">v1.0.0</span>
</footer>

<div id="toast" role="status" aria-live="polite"></div>
<button id="shutdown-fab" class="shutdown-fab" type="button" aria-label="Shutdown server">⏻</button>

<script src="/static/js/util.js?v=2.1.2" defer></script>
<script src="/static/js/ui.js?v=2.1.2" defer></script>
<script src="/static/js/mastermind.js?v=2.1.2" defer></script>

<!-- ✅ Keep your existing JS exactly as-is below -->
<script>
document.addEventListener("DOMContentLoaded",()=>{

  /* ── Clock + session ── */
  const clockEl=document.getElementById("sys-clock");
  const sessionEl=document.getElementById("session-id");
  if(sessionEl) sessionEl.textContent=Math.random().toString(36).slice(2,8).toUpperCase();
  const tick=()=>{if(clockEl) clockEl.textContent=new Date().toLocaleTimeString("en-GB",{hour12:false})+" UTC";};
  tick();setInterval(tick,1000);

  /* ── Mobile nav ── */
  const navToggle=document.getElementById("nav-toggle");
  navToggle?.addEventListener("click",()=>{
    const on=!document.body.classList.contains("nav-open");
    document.body.classList.toggle("nav-open",on);
    navToggle.setAttribute("aria-expanded",String(on));
  });
  document.addEventListener("click",e=>{
    const sb=document.getElementById("sidebar");
    if(document.body.classList.contains("nav-open")&&!sb.contains(e.target)&&!navToggle.contains(e.target)){
      document.body.classList.remove("nav-open");
      navToggle.setAttribute("aria-expanded","false");
    }
  });

  /* ── Shutdown ── */
  const wireShutdown=btn=>{
    if(!btn)return;
    btn.addEventListener("click",async()=>{
      if(!confirm("Terminate the ASTRA server process?"))return;
      const prev=btn.textContent;btn.disabled=true;
      try{
        const res=await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"user_request"})});
        if(!res.ok)throw new Error();
        (window.HIREX?.toast||(m=>alert(m)))("// SHUTDOWN INITIATED");
        setTimeout(()=>{window.close();window.location.href="about:blank";},800);
      }catch{
        (window.HIREX?.toast||(m=>alert(m)))("// ERROR: Shutdown endpoint unreachable");
        btn.disabled=false;btn.textContent=prev;
      }
    });
  };
  wireShutdown(document.getElementById("shutdown-btn"));
  wireShutdown(document.getElementById("shutdown-fab"));

  /* ── Ctrl/Cmd+Enter to send ── */
  const input=document.getElementById("chat_input");
  const send=document.getElementById("send_btn");
  input?.addEventListener("keydown",e=>{
    if((e.ctrlKey||e.metaKey)&&e.key==="Enter"){
      e.preventDefault();
      send?.click();
    }
  });

  /* ── Message rendering hook for mastermind.js ── */
  window.__mm={
    appendMsg(text,role="bot",senderLabel){
      const stream=document.getElementById("chat_stream");if(!stream)return;
      const row=document.createElement("div");
      row.className=`msg-row ${role}`;
      const isBot=role==="bot";
      const avatarText=isBot?"MM":"YOU";
      const sender=senderLabel||(isBot?"MasterMind":"You");
      row.innerHTML=`
        <div class="avatar" aria-hidden="true">${avatarText}</div>
        <div class="bubble" data-sender="${sender}">${text.replace(/</g,"&lt;").replace(/>/g,"&gt;")}</div>
      `;
      stream.appendChild(row);
      stream.scrollTop=stream.scrollHeight;
      return row;
    },
    showTyping(){
      const stream=document.getElementById("chat_stream");if(!stream)return null;
      const row=document.createElement("div");
      row.className="msg-row bot";
      row.innerHTML=`
        <div class="avatar" aria-hidden="true">MM</div>
        <div class="bubble typing" data-sender="MasterMind">
          <span class="typing-dots"><span></span><span></span><span></span></span>
        </div>
      `;
      stream.appendChild(row);stream.scrollTop=stream.scrollHeight;
      return row;
    },
    clearTyping(el){el?.remove();}
  };

  (window.ASTRA??window.HIREX)?.debugLog?.("MASTERMIND PAGE LOADED",{version:"v1.0.0"});
});
</script>
</body>
</html>