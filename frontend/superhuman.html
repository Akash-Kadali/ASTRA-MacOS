# ===== FILE: ./frontend/superhuman.html =====
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <meta name="color-scheme" content="dark light"/>
  <meta name="theme-color" content="#0B1220"/>
  <title>ASTRA · HIREX</title>
  <meta name="description" content="SuperHuman — ASTRA's standalone Humanizer to refine any text for tone, clarity, and flow."/>
  <meta name="author" content="Sri Akash Kadali"/>
  <meta http-equiv="Content-Security-Policy"
        content="
          default-src 'self' blob: data:;
          img-src 'self' data: blob:;
          style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
          font-src 'self' data: https://fonts.gstatic.com;
          script-src 'self' 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval';
          connect-src 'self' blob:
                       http://127.0.0.1:8000 ws://127.0.0.1:8000
                       http://0.0.0.0:8000   ws://0.0.0.0:8000
                       https://api.openai.com;
          frame-src 'self' blob: data: about:;
          child-src 'self' blob:;
          worker-src 'self' blob:;
          media-src 'self' blob: data:;
          object-src 'none';
          base-uri 'self';
          frame-ancestors 'self';
        "/>

  <link rel="icon" type="image/png" href="/static/assets/favicon.png"/>
  <link rel="preload" href="/static/assets/logo.png" as="image"/>

  <!-- Google Sans + JetBrains Mono -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet"/>

  <link rel="stylesheet" href="/static/css/animations.css?v=2.1.0"/>

<style>
:root{
  /* Surfaces */
  --bg0:#0B1220;
  --bg1:#0E1629;

  /* Text */
  --text:#EAF0FF;
  --muted:rgba(234,240,255,.72);
  --dim:rgba(234,240,255,.42);

  /* Accents */
  --accent:#7AA7FF;
  --ok:#34D399;
  --warn:#FBBF24;
  --danger:#FB7185;

  /* Lines + shadows */
  --line:rgba(255,255,255,.10);
  --shadow:0 18px 50px rgba(0,0,0,.45);

  /* Type */
  --ui:"Google Sans",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
  --mono:"JetBrains Mono",ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;

  /* Layout */
  --sidebar:268px;
  --topbar:52px;

  /* Radius */
  --r:16px;
  --r2:12px;

  /* Page */
  --maxw:1200px;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
::selection{background:rgba(122,167,255,.35);color:#fff;}

body{
  font-family:var(--ui);
  background:
    radial-gradient(900px 520px at 20% -10%, rgba(122,167,255,.18), transparent 60%),
    radial-gradient(900px 520px at 85% 22%, rgba(185,199,255,.10), transparent 60%),
    radial-gradient(700px 500px at 65% 110%, rgba(52,211,153,.08), transparent 60%),
    linear-gradient(180deg, var(--bg0), var(--bg1));
  color:var(--text);
  font-size:14px;
  line-height:1.55;
  overflow-x:hidden;
  min-height:100vh;
  isolation:isolate;
}

/* Subtle noise */
.grain{
  position:fixed;inset:0;z-index:1;pointer-events:none;opacity:.028;
  background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-size:220px 220px;
}

/* Ambient blobs */
.ambient{position:fixed;pointer-events:none;z-index:0;border-radius:50%;filter:blur(120px);opacity:.9;}
.amb-1{
  width:520px;height:520px;top:-220px;left:calc(var(--sidebar) - 120px);
  background:radial-gradient(circle,rgba(122,167,255,.26),transparent 70%);
  animation:drift 26s ease-in-out infinite alternate;
}
.amb-2{
  width:520px;height:520px;bottom:-220px;right:4%;
  background:radial-gradient(circle,rgba(52,211,153,.14),transparent 72%);
  animation:drift 30s ease-in-out infinite alternate-reverse;
}
@keyframes drift{from{transform:translate(0,0);}to{transform:translate(30px,34px);}}

/* ── TOPBAR ── */
.topbar{
  position:fixed;top:0;left:var(--sidebar);right:0;height:var(--topbar);
  z-index:40;
  background:rgba(15,22,41,.72);
  border-bottom:1px solid var(--line);
  display:flex;align-items:center;justify-content:space-between;
  padding:0 1.25rem;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
.topbar-left,.topbar-right{display:flex;align-items:center;gap:1rem;}
.sys-online{
  display:flex;align-items:center;gap:.5rem;
  font-size:12px;font-weight:800;color:rgba(234,240,255,.72);
}
.sys-online::before{
  content:"";width:8px;height:8px;border-radius:999px;
  background:var(--ok);
  box-shadow:0 0 0 4px rgba(52,211,153,.10);
}
.topbar-tag{font-size:12px;color:var(--dim);display:flex;align-items:center;gap:.35rem;}
.topbar-tag b{color:rgba(234,240,255,.78);font-weight:800;}
#sys-clock{font-variant-numeric:tabular-nums;font-size:12px;color:rgba(234,240,255,.72);}

/* ── SIDEBAR ── */
.sidebar{
  position:fixed;top:0;left:0;width:var(--sidebar);height:100vh;
  z-index:50;
  background:rgba(15,22,41,.78);
  border-right:1px solid var(--line);
  display:flex;flex-direction:column;overflow:hidden;
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
.sidebar::after{
  content:"";position:absolute;inset:0;pointer-events:none;
  background:
    linear-gradient(180deg, rgba(255,255,255,.06), transparent 30%),
    radial-gradient(800px 380px at 20% 0%, rgba(122,167,255,.10), transparent 60%);
  opacity:.8;
}

.brand{
  position:relative;z-index:2;
  padding:1.15rem 1.1rem 1rem;
  border-bottom:1px solid var(--line);
  display:flex;flex-direction:column;gap:.5rem;
}
.brand-row{display:flex;align-items:center;gap:.8rem;}
.brand-logo{width:44px;height:44px;flex-shrink:0;border-radius:14px;overflow:hidden;}
.brand-logo img{
  width:44px;height:44px;object-fit:contain;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
}
.brand-wordmark{display:flex;flex-direction:column;gap:.08rem;}
.brand-name{font-size:16px;font-weight:900;letter-spacing:.06em;color:var(--text);}
.brand-tagline{font-size:12px;color:var(--dim);}
.brand-sysinfo{display:flex;gap:.45rem;flex-wrap:wrap;margin-top:.15rem;}
.sys-badge{
  font-family:var(--mono);font-size:11px;
  color:rgba(234,240,255,.75);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  padding:.18em .65em;
  background:rgba(255,255,255,.05);
}

.vnav{list-style:none;padding:.75rem .6rem;flex:1;overflow-y:auto;position:relative;z-index:2;}
.vnav::-webkit-scrollbar{width:6px;}
.vnav::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px;}
.nav-group-label{
  font-size:11px;font-weight:900;letter-spacing:.10em;text-transform:uppercase;
  color:rgba(234,240,255,.42);padding:.75rem .7rem .35rem;
}
.vnav a{
  display:flex;align-items:center;gap:.7rem;
  color:rgba(234,240,255,.72);
  text-decoration:none;
  font-size:13px;font-weight:800;
  padding:.62rem .75rem;
  border-radius:12px;border:1px solid transparent;
  margin-bottom:.2rem;
  transition:background .15s,border-color .15s,transform .12s,color .15s;
}
.vnav a .nav-ico{width:22px;text-align:center;opacity:.7;font-size:.92rem;}
.vnav a:hover{
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.10);
  transform:translateY(-1px);
  color:var(--text);
}
.vnav a.active-link{
  background:linear-gradient(90deg, rgba(122,167,255,.22), rgba(255,255,255,.06));
  border-color:rgba(122,167,255,.25);
  color:var(--text);
}
.vnav a.active-link::after,.vnav a.active-link::before{display:none;}

.sidebar-foot{
  position:relative;z-index:2;
  padding:.9rem;border-top:1px solid var(--line);
  display:flex;flex-direction:column;gap:.55rem;
}
.btn-exec{
  width:100%;
  display:flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg, rgba(122,167,255,.22), rgba(122,167,255,.14));
  border:1px solid rgba(122,167,255,.28);
  color:var(--text);
  font-family:var(--ui);
  font-size:12px;font-weight:900;letter-spacing:.06em;
  padding:.72rem .9rem;border-radius:12px;cursor:pointer;
  transition:transform .12s,box-shadow .2s,background .2s;
  box-shadow:0 10px 22px rgba(0,0,0,.20);
}
.btn-exec::before{display:none;}
.btn-exec:hover{
  transform:translateY(-1px);
  box-shadow:0 0 0 4px rgba(122,167,255,.10), 0 14px 32px rgba(0,0,0,.26);
}
.btn-exec span{position:relative;z-index:1;}

.btn-kill{
  width:100%;
  display:flex;align-items:center;justify-content:center;
  background:rgba(251,113,133,.10);
  border:1px solid rgba(251,113,133,.22);
  color:rgba(251,113,133,.92);
  font-family:var(--ui);
  font-size:12px;font-weight:900;letter-spacing:.06em;
  padding:.7rem .9rem;border-radius:12px;cursor:pointer;
  transition:transform .12s,box-shadow .2s,background .2s;
}
.btn-kill:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(251,113,133,.10);}
.btn-kill:disabled{opacity:.45;cursor:not-allowed;transform:none;}

/* ── HAMBURGER ── */
.hamburger{
  display:none;position:fixed;top:12px;left:12px;z-index:60;
  background:rgba(15,22,41,.72);
  border:1px solid rgba(255,255,255,.10);
  color:var(--text);
  font-size:1rem;padding:.46rem .66rem;border-radius:12px;
  cursor:pointer;backdrop-filter:blur(18px);-webkit-backdrop-filter:blur(18px);
}
@media(max-width:700px){
  .hamburger{display:block;}
  .sidebar{left:-100%;width:82%;transition:left .28s ease;}
  body.nav-open .sidebar{left:0;}
  main.console,.topbar,footer{margin-left:0!important;left:0!important;}
}

/* ── MAIN ── */
main.console{
  margin-left:var(--sidebar);
  padding:calc(var(--topbar) + 2rem) 2.2rem 5rem;
  position:relative;z-index:2;
  display:flex;flex-direction:column;align-items:center;
  min-height:100vh;gap:1.2rem;
}

/* Page header */
.page-head{
  width:100%;max-width:var(--maxw);
  display:flex;align-items:flex-start;justify-content:space-between;
  gap:1rem;
  animation:rise .6s ease both;
}
@keyframes rise{from{opacity:0;transform:translateY(16px);}to{opacity:1;transform:translateY(0);}}

/* Typography refresh */
.page-head-text{display:flex;flex-direction:column;gap:.55rem;}
.page-pre{
  font-family:var(--ui);
  font-size:12px;font-weight:800;
  letter-spacing:.08em;text-transform:uppercase;
  color:rgba(234,240,255,.65);
  display:flex;align-items:center;gap:.6rem;
}
.page-pre::before{
  content:"";display:inline-block;width:24px;height:2px;
  background:rgba(122,167,255,.65);
  border-radius:999px;
}
h1.page-title{
  font-family:var(--ui);
  font-size:clamp(28px,3.2vw,44px);
  letter-spacing:-0.02em;
  line-height:1.05;
  color:rgba(234,240,255,.95);
}
h1.page-title span{
  display:block;
  font-family:var(--ui);
  font-size:14px;
  font-weight:700;
  letter-spacing:0;
  color:rgba(234,240,255,.62);
  margin-top:.35rem;
}
.page-desc{
  font-family:var(--ui);
  font-size:14px;
  color:rgba(234,240,255,.72);
  line-height:1.65;
  max-width:640px;
}

/* Status pill */
.status-pill{
  display:flex;align-items:center;gap:.5rem;
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  padding:.5rem .85rem;
  background:rgba(255,255,255,.04);
  font-family:var(--ui);
  font-size:12px;font-weight:800;
  color:rgba(234,240,255,.70);
  white-space:nowrap;flex-shrink:0;height:fit-content;margin-top:.3rem;
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}
.status-pill-dot{width:8px;height:8px;border-radius:999px;background:var(--warn);box-shadow:0 0 0 4px rgba(251,191,36,.10);}
.status-pill.on .status-pill-dot{background:var(--ok);box-shadow:0 0 0 4px rgba(52,211,153,.10);}
.status-pill.off .status-pill-dot{background:var(--danger);box-shadow:0 0 0 4px rgba(251,113,133,.10);}

/* ── TOOLBAR PANEL ── */
.toolbar-panel{
  width:100%;max-width:var(--maxw);
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  overflow:hidden;
  animation:rise .65s .06s ease both;
  box-shadow:0 18px 44px rgba(0,0,0,.18);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
  position:relative;
}
.toolbar-panel::before,.toolbar-panel::after,.tb-bl,.tb-br{display:none;}

.toolbar-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:.8rem 1rem;
  background:rgba(255,255,255,.03);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.toolbar-id{
  font-family:var(--ui);
  font-size:12px;font-weight:900;
  letter-spacing:.06em;
  text-transform:uppercase;
  color:rgba(234,240,255,.78);
}
.toolbar-id::before{display:none;}

.toolbar-body{
  display:flex;flex-wrap:wrap;gap:.65rem;align-items:center;
  padding:1rem 1.05rem;
}

/* Select dropdowns */
.ctrl-select{
  background:rgba(255,255,255,.05);
  color:rgba(234,240,255,.92);
  border:1px solid rgba(255,255,255,.12);
  border-radius:12px;
  padding:.52rem .75rem;
  font-family:var(--ui);
  font-size:12px;
  font-weight:800;
  appearance:none;outline:none;cursor:pointer;height:34px;
  transition:border-color .2s,box-shadow .2s,background .2s;
}
.ctrl-select:focus{
  border-color:rgba(122,167,255,.30);
  box-shadow:0 0 0 4px rgba(122,167,255,.12);
  background:rgba(255,255,255,.06);
}
option{background:#0C1426;color:rgba(234,240,255,.92);}

/* Divider */
.ctrl-sep{width:1px;height:22px;background:rgba(255,255,255,.12);flex-shrink:0;}

/* Toggle groups */
.tg-group,.latex-group{display:flex;align-items:center;gap:.55rem;}
.tg-lbl,.latex-lbl{font-family:var(--ui);font-size:12px;font-weight:900;color:rgba(234,240,255,.65);}

/* Switch */
.switch{position:relative;width:42px;height:22px;flex-shrink:0;}
.switch input{opacity:0;width:0;height:0;position:absolute;}
.slider{
  position:absolute;inset:0;cursor:pointer;
  background:rgba(255,255,255,.08);
  border:1px solid rgba(255,255,255,.12);
  border-radius:999px;
  transition:.22s;
}
.slider::before{
  content:"";position:absolute;width:14px;height:14px;left:4px;top:3px;
  background:rgba(234,240,255,.55);
  border-radius:999px;
  transition:.22s;
}
input:checked+.slider{
  background:rgba(122,167,255,.18);
  border-color:rgba(122,167,255,.30);
  box-shadow:0 0 0 4px rgba(122,167,255,.10);
}
input:checked+.slider::before{transform:translateX(20px);background:rgba(234,240,255,.92);}

/* Buttons */
.btn-run{
  display:flex;align-items:center;gap:.45rem;
  background:linear-gradient(180deg, rgba(122,167,255,.30), rgba(122,167,255,.16));
  border:1px solid rgba(122,167,255,.26);
  color:rgba(234,240,255,.92);
  font-family:var(--ui);
  font-size:12px;font-weight:900;letter-spacing:.06em;text-transform:uppercase;
  padding:.6rem 1.1rem;border-radius:12px;height:34px;
  cursor:pointer;transition:transform .12s,box-shadow .2s,background .2s;
}
.btn-run::before{display:none;}
.btn-run:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(122,167,255,.10);}

.btn-ghost{
  display:flex;align-items:center;gap:.4rem;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(234,240,255,.72);
  font-family:var(--ui);
  font-size:12px;font-weight:900;
  padding:.6rem .9rem;border-radius:12px;height:34px;
  cursor:pointer;transition:transform .12s,box-shadow .2s,background .2s,border-color .2s;
}
.btn-ghost:hover{transform:translateY(-1px);background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.14);}

.status-badge{
  font-family:var(--ui);font-size:12px;font-weight:900;
  color:rgba(234,240,255,.55);
  margin-left:auto;display:flex;align-items:center;gap:.4rem;
}
.status-badge.on{color:rgba(52,211,153,.92);}
.status-badge.off{color:rgba(251,113,133,.92);}

/* ── SPLIT PANES ── */
.split{
  width:100%;max-width:var(--maxw);
  display:grid;grid-template-columns:1fr 1fr;
  gap:.75rem;
  animation:rise .7s .12s ease both;
}
@media(max-width:980px){.split{grid-template-columns:1fr;}}

/* Panes */
.pane{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  overflow:hidden;
  display:flex;flex-direction:column;
  position:relative;
  box-shadow:0 18px 44px rgba(0,0,0,.14);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}

.pane-head{
  display:flex;align-items:center;justify-content:space-between;
  padding:.8rem 1rem;
  background:rgba(255,255,255,.03);
  border-bottom:1px solid rgba(255,255,255,.08);
  flex-shrink:0;
}
.pane-title{
  font-family:var(--ui);font-size:12px;font-weight:900;
  letter-spacing:.06em;text-transform:uppercase;
  color:rgba(234,240,255,.78);
}
.pane-title::before{display:none;}
.pane-actions{display:flex;gap:.45rem;flex-wrap:wrap;}
.pane-btn{
  display:flex;align-items:center;gap:.3rem;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.10);
  color:rgba(234,240,255,.72);
  font-family:var(--ui);font-size:12px;font-weight:900;
  padding:.45rem .7rem;border-radius:12px;cursor:pointer;
  transition:transform .12s,background .2s,border-color .2s,box-shadow .2s;
  text-transform:uppercase;
}
.pane-btn:hover{
  transform:translateY(-1px);
  background:rgba(255,255,255,.06);
  border-color:rgba(255,255,255,.14);
}

/* Editor */
.editor-wrap{position:relative;flex:1;display:flex;}
.line-nums{display:none;}

textarea.editor{
  flex:1;
  min-height:460px;
  background:rgba(255,255,255,.02);
  color:rgba(234,240,255,.92);
  border:none;outline:none;
  padding:1rem 1rem;
  font-family:var(--ui);
  font-size:14px;line-height:1.65;
  resize:none;
  transition:background .2s,box-shadow .2s;
}
textarea.editor:focus{
  background:rgba(255,255,255,.03);
  box-shadow:inset 0 0 0 2px rgba(122,167,255,.18);
}
textarea.editor::placeholder{color:rgba(234,240,255,.45);}

.output-area{
  flex:1;min-height:460px;
  background:rgba(255,255,255,.02);
  color:rgba(234,240,255,.92);
  border:none;outline:none;
  padding:1rem 1rem;
  font-family:var(--ui);
  font-size:14px;line-height:1.65;
  overflow:auto;white-space:pre-wrap;word-break:break-word;
  cursor:text;
  transition:background .2s,box-shadow .2s;
}
.output-area:focus{
  background:rgba(255,255,255,.03);
  box-shadow:inset 0 0 0 2px rgba(122,167,255,.18);
}
.output-area:empty::before{content:"Output appears here…";color:rgba(234,240,255,.45);}
.output-area::-webkit-scrollbar{width:8px;}
.output-area::-webkit-scrollbar-thumb{background:rgba(255,255,255,.14);border-radius:999px;}

/* Output: pending state */
.output-area.running{
  color:rgba(251,191,36,.92);
  background:rgba(251,191,36,.06);
}
.output-area.running::before{
  content:"Processing…";color:rgba(251,191,36,.92);display:block;
}

.pane-foot{
  padding:.7rem 1rem;border-top:1px solid rgba(255,255,255,.08);
  font-family:var(--ui);font-size:12px;font-weight:800;
  color:rgba(234,240,255,.55);
  display:flex;justify-content:space-between;align-items:center;flex-shrink:0;
  background:rgba(255,255,255,.02);
}
.pane-foot kbd{
  border:1px solid rgba(255,255,255,.14);
  border-radius:8px;
  padding:.15em .5em;
  color:rgba(234,240,255,.72);
  font-family:var(--mono);
  font-size:11px;
  background:rgba(255,255,255,.04);
}

/* Footer */
footer{
  margin-left:var(--sidebar);
  padding:1rem 2rem;
  border-top:1px solid rgba(255,255,255,.10);
  display:flex;align-items:center;justify-content:space-between;
  flex-wrap:wrap;gap:.5rem;
  font-size:12px;color:rgba(234,240,255,.55);
  background:rgba(15,22,41,.65);
  backdrop-filter:blur(18px);
  -webkit-backdrop-filter:blur(18px);
}
footer b{color:rgba(234,240,255,.78);}
.ver-tag{
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.05);
  color:rgba(234,240,255,.75);
  padding:.25em .75em;border-radius:999px;
  font-family:var(--mono);font-size:11px;
}

/* Toast */
#toast{
  position:fixed;left:50%;transform:translateX(-50%);bottom:18px;
  background:rgba(15,22,41,.85);
  border:1px solid rgba(255,255,255,.12);
  color:rgba(234,240,255,.86);
  padding:.7rem 1.05rem;
  border-radius:12px;
  display:none;z-index:9999;
  font-family:var(--ui);font-size:13px;font-weight:800;
  box-shadow:0 18px 44px rgba(0,0,0,.28);
}

/* FAB */
.shutdown-fab{
  position:fixed;right:18px;bottom:18px;z-index:40;
  width:44px;height:44px;border-radius:14px;
  background:rgba(251,113,133,.10);
  border:1px solid rgba(251,113,133,.22);
  color:rgba(251,113,133,.92);
  display:flex;align-items:center;justify-content:center;font-size:1rem;
  cursor:pointer;transition:transform .12s,box-shadow .2s,background .2s;
}
.shutdown-fab:hover{transform:translateY(-1px);box-shadow:0 0 0 4px rgba(251,113,133,.10), 0 18px 44px rgba(0,0,0,.28);}
.shutdown-fab:disabled{opacity:.45;cursor:not-allowed;transform:none;}

/* Responsive */
@media(max-width:900px){
  main.console{padding-left:1.5rem;padding-right:1.5rem;}
  .toolbar-body{gap:.5rem;}
  .page-head{flex-direction:column;}
}
@media(max-width:600px){
  main.console{padding-left:1.25rem;padding-right:1.25rem;}
}
</style>
</head>
<body class="glass-page">

<div class="grain" aria-hidden="true"></div>
<div class="ambient amb-1" aria-hidden="true"></div>
<div class="ambient amb-2" aria-hidden="true"></div>

<button id="nav-toggle" class="hamburger" aria-label="Toggle navigation" aria-controls="sidebar" aria-expanded="false">☰</button>

<!-- ════════════════ SIDEBAR ════════════════ -->
<aside class="sidebar" id="sidebar" role="navigation" aria-label="Primary">
  <div class="brand">
    <div class="brand-row">
      <div class="brand-logo">
        <img src="/static/assets/logo.png" alt="ASTRA" loading="lazy"/>
      </div>
      <div class="brand-wordmark">
        <span class="brand-name">ASTRA</span>
        <span class="brand-tagline">AI Career Ops System</span>
      </div>
    </div>
    <div class="brand-sysinfo">
      <span class="sys-badge">v1.0.0</span>
      <span class="sys-badge">GPT-4o</span>
      <span class="sys-badge">ONLINE</span>
    </div>
  </div>

  <ul class="vnav">
    <li class="nav-group-label">Core</li>
    <li><a href="/index.html"><span class="nav-ico">⬡</span> HIREX</a></li>
    <li><a href="/preview.html"><span class="nav-ico">◧</span> Preview</a></li>
    <li><a href="/coverletter.html"><span class="nav-ico">◈</span> Cover Letter</a></li>

    <li class="nav-group-label">Intelligence</li>
    <li><a href="/talk.html"><span class="nav-ico">◎</span> Talk to HIREX</a></li>
    <li><a href="/mastermind.html"><span class="nav-ico">◉</span> MasterMind</a></li>
    <li><a href="/superhuman.html" class="active-link" aria-current="page"><span class="nav-ico">◈</span> SuperHuman</a></li>

    <li class="nav-group-label">Analytics</li>
    <li><a href="/dashboard.html"><span class="nav-ico">▦</span> Dashboard</a></li>
    <li><a href="/genie.html"><span class="nav-ico">◐</span> Genie</a></li>
  </ul>

  <div class="sidebar-foot">
    <button class="btn-exec" type="button" id="sidebar-run-btn">
      <span>Run humanize</span>
    </button>
    <button id="shutdown-btn" class="btn-kill" type="button">⏻ Kill server</button>
  </div>
</aside>

<!-- ════════════════ TOPBAR ════════════════ -->
<div class="topbar" role="status">
  <div class="topbar-left">
    <span class="sys-online">Online</span>
    <span class="topbar-tag">Module <b>SuperHuman</b></span>
    <span class="topbar-tag">Engine <b>v1.0.0</b></span>
  </div>
  <div class="topbar-right">
    <span class="topbar-tag">Session <b id="session-id">—</b></span>
    <span id="sys-clock">—</span>
  </div>
</div>

<!-- ════════════════ MAIN ════════════════ -->
<main id="content" class="console" role="main">

  <!-- Page header -->
  <div class="page-head">
    <div class="page-head-text">
      <div class="page-pre">Text Humanizer Module</div>
      <h1 class="page-title">
        SuperHuman
        <span>Standalone Humanizer Engine</span>
      </h1>
      <p class="page-desc">
        Refine any text for tone, clarity, and flow. No resume or JD context required —
        pure output enhancement via the Humanize API.
      </p>
    </div>
    <div class="status-pill on" id="humanize-pill">
      <div class="status-pill-dot"></div>
      <span id="status_badge">Humanize ON</span>
    </div>
  </div>

  <!-- Toolbar panel -->
  <div class="toolbar-panel" role="toolbar" aria-label="Humanizer controls">
    <div class="toolbar-head">
      <span class="toolbar-id">Config — Mode / Tone / Options</span>
    </div>
    <div class="toolbar-body">

      <select id="mode" class="ctrl-select" aria-label="Rewrite mode">
        <option value="paragraph" selected>Paragraph</option>
        <option value="sentence">Sentence</option>
        <option value="resume">Resume Bullet</option>
        <option value="coverletter">Cover Letter</option>
        <option value="custom">Custom</option>
      </select>

      <select id="tone" class="ctrl-select" aria-label="Tone">
        <option value="balanced" selected>Balanced</option>
        <option value="formal">Formal</option>
        <option value="confident">Confident</option>
        <option value="conversational">Conversational</option>
        <option value="academic">Academic</option>
      </select>

      <div class="ctrl-sep"></div>

      <!-- LaTeX safe -->
      <div class="latex-group">
        <label class="switch" aria-label="LaTeX safe mode" title="LaTeX-safe output">
          <input type="checkbox" id="latex_safe" checked/>
          <span class="slider" aria-hidden="true"></span>
        </label>
        <span class="latex-lbl">LaTeX-safe</span>
      </div>

      <div class="ctrl-sep"></div>

      <!-- Humanize API toggle -->
      <div class="tg-group">
        <label class="switch" title="Toggle Humanize API" aria-label="Enable Humanize API">
          <input type="checkbox" id="humanize_toggle" checked/>
          <span class="slider" aria-hidden="true"></span>
        </label>
        <span class="tg-lbl">Humanize API</span>
      </div>

      <div class="ctrl-sep"></div>

      <button id="rewrite_btn" class="btn-run" type="button">
        <span>Humanize</span>
      </button>
      <button id="clear_btn" class="btn-ghost" type="button">Clear</button>

      <div class="status-badge on" id="api-status-badge" aria-live="polite">
        API online
      </div>
    </div>
  </div>

  <!-- Split editor / output -->
  <section class="split" aria-label="Humanizer editor and output">

    <!-- Input pane -->
    <div class="pane">
      <div class="pane-head">
        <span class="pane-title">Input</span>
        <div class="pane-actions">
          <button id="paste_btn" class="pane-btn" type="button" aria-controls="input_text">Paste</button>
        </div>
      </div>
      <div class="editor-wrap">
        <textarea
          id="input_text"
          class="editor"
          placeholder="Paste or type text to humanize…"
          spellcheck="false"
          aria-label="Input text"
        ></textarea>
      </div>
      <div class="pane-foot">
        <span>Input</span>
        <span><kbd>Ctrl</kbd> + <kbd>Enter</kbd> to run</span>
      </div>
    </div>

    <!-- Output pane -->
    <div class="pane">
      <div class="pane-head">
        <span class="pane-title">Output</span>
        <div class="pane-actions">
          <button id="copy_btn"     class="pane-btn" type="button">Copy</button>
          <button id="download_btn" class="pane-btn" type="button">Download</button>
          <button id="select_btn"   class="pane-btn" type="button">Select all</button>
        </div>
      </div>
      <div class="editor-wrap">
        <div
          id="human_output"
          class="output-area"
          contenteditable="true"
          role="textbox"
          aria-multiline="true"
          tabindex="0"
          aria-label="Humanized output"
        ></div>
      </div>
      <div class="pane-foot">
        <span>Output</span>
        <span id="output-char-count" style="color:rgba(234,240,255,.55);">0 chars</span>
      </div>
    </div>

  </section>
</main>

<footer>
  <span>© 2025 <b>ASTRA</b> — <b>Sri Akash Kadali</b></span>
  <span>FastAPI · AI Humanize API</span>
  <span class="ver-tag">v1.0.0</span>
</footer>

<div id="toast" role="status" aria-live="polite"></div>
<button id="shutdown-fab" class="shutdown-fab" type="button" aria-label="Shutdown server">⏻</button>

<script src="/static/js/util.js?v=2.1.0" defer></script>
<script src="/static/js/ui.js?v=2.1.0" defer></script>
<script src="/static/js/superhuman.js?v=2.1.2" defer></script>

<!-- ✅ Keep your existing JS exactly as-is below -->
<script>
document.addEventListener("DOMContentLoaded",()=>{

  /* ── Clock + session ── */
  const clockEl=document.getElementById("sys-clock");
  const sessionEl=document.getElementById("session-id");
  if(sessionEl) sessionEl.textContent=Math.random().toString(36).slice(2,8).toUpperCase();
  const tick=()=>{if(clockEl) clockEl.textContent=new Date().toLocaleTimeString("en-GB",{hour12:false})+" UTC";};
  tick();setInterval(tick,1000);

  /* ── Mobile nav ── */
  const navToggle=document.getElementById("nav-toggle");
  navToggle?.addEventListener("click",()=>{
    const on=!document.body.classList.contains("nav-open");
    document.body.classList.toggle("nav-open",on);
    navToggle.setAttribute("aria-expanded",String(on));
  });
  document.addEventListener("click",e=>{
    const sb=document.getElementById("sidebar");
    if(document.body.classList.contains("nav-open")&&!sb.contains(e.target)&&!navToggle.contains(e.target)){
      document.body.classList.remove("nav-open");
      navToggle.setAttribute("aria-expanded","false");
    }
  });

  /* ── Shutdown ── */
  const wireShutdown=btn=>{
    if(!btn)return;
    btn.addEventListener("click",async()=>{
      if(!confirm("Terminate the ASTRA server process?"))return;
      const prev=btn.textContent;btn.disabled=true;
      try{
        const res=await fetch("/api/system/shutdown",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:"user_request"})});
        if(!res.ok)throw new Error();
        (window.HIREX?.toast||(m=>alert(m)))("// SHUTDOWN INITIATED");
        setTimeout(()=>{window.close();window.location.href="about:blank";},800);
      }catch{
        (window.HIREX?.toast||(m=>alert(m)))("// ERROR: Shutdown endpoint unreachable");
        btn.disabled=false;btn.textContent=prev;
      }
    });
  };
  wireShutdown(document.getElementById("shutdown-btn"));
  wireShutdown(document.getElementById("shutdown-fab"));

  /* ── Helpers ── */
  const H=window.HIREX||{};
  const toast=msg=>(H.toast?H.toast(msg):alert(msg));

  const outEl=document.getElementById("human_output");
  const inputEl=document.getElementById("input_text");
  const charCount=document.getElementById("output-char-count");

  const getOutText=()=>(outEl?.innerText||outEl?.textContent||"").trim();

  /* ── Output char counter ── */
  if(outEl&&charCount){
    const updateCount=()=>{charCount.textContent=getOutText().length+" chars";};
    new MutationObserver(updateCount).observe(outEl,{childList:true,subtree:true,characterData:true});
  }

  /* ── Humanize toggle status sync ── */
  const toggle=document.getElementById("humanize_toggle");
  const pill=document.getElementById("humanize-pill");
  const badge=document.getElementById("status_badge");
  const apiBadge=document.getElementById("api-status-badge");

  function syncHumanizeUI(on){
    if(pill){pill.className="status-pill "+(on?"on":"off");}
    if(badge) badge.textContent=on?"Humanize ON":"Humanize OFF";
    if(apiBadge){apiBadge.textContent=on?"API online":"API disabled";apiBadge.className="status-badge "+(on?"on":"off");}
    localStorage.setItem("hirex-use-humanize",on?"on":"off");
    localStorage.setItem("hirex_use_humanize",on?"true":"false");
    document.dispatchEvent(new CustomEvent("hirex:humanize-change",{detail:{on}}));
  }

  const a=localStorage.getItem("hirex-use-humanize");
  const b=localStorage.getItem("hirex_use_humanize");
  const startOn=(a==="on")||(b==="true")||(a===null&&b===null);
  if(toggle) toggle.checked=startOn;
  syncHumanizeUI(startOn);
  toggle?.addEventListener("change",()=>syncHumanizeUI(toggle.checked));

  /* ── Copy ── */
  document.getElementById("copy_btn")?.addEventListener("click",async()=>{
    const text=getOutText();
    if(!text) return toast("Nothing to copy");
    try{await navigator.clipboard.writeText(text);toast("Copied to clipboard");}
    catch{toast("Clipboard permission denied");}
  });

  /* ── Select all ── */
  document.getElementById("select_btn")?.addEventListener("click",()=>{
    if(!outEl)return;
    const range=document.createRange();range.selectNodeContents(outEl);
    const sel=window.getSelection();sel.removeAllRanges();sel.addRange(range);
    toast("All output selected");
  });

  /* ── Download ── */
  document.getElementById("download_btn")?.addEventListener("click",()=>{
    const text=getOutText();
    if(!text) return toast("Nothing to download");
    const ts=new Date().toISOString().replace(/[:.]/g,"-");
    const blob=new Blob([text],{type:"text/plain"});
    const a=Object.assign(document.createElement("a"),{href:URL.createObjectURL(blob),download:`SuperHuman_${ts}.txt`});
    document.body.appendChild(a);a.click();a.remove();
    setTimeout(()=>URL.revokeObjectURL(a.href),600);
  });

  /* ── Paste ── */
  document.getElementById("paste_btn")?.addEventListener("click",async()=>{
    try{
      const t=await navigator.clipboard.readText();
      if(!t) return toast("Clipboard is empty");
      if(inputEl){inputEl.value=(inputEl.value?inputEl.value+"\n":"")+t;inputEl.focus();}
      toast("Pasted into input");
    }catch{toast("Clipboard permission denied");}
  });

  /* ── Clear ── */
  document.getElementById("clear_btn")?.addEventListener("click",()=>{
    if(inputEl) inputEl.value="";
    if(outEl){outEl.textContent="";outEl.classList.remove("running");}
    if(charCount) charCount.textContent="0 chars";
    toast("Cleared");
  });

  /* ── Sidebar shortcut ── */
  document.getElementById("sidebar-run-btn")?.addEventListener("click",()=>{
    document.getElementById("rewrite_btn")?.click();
  });

  /* ── Ctrl/Cmd+Enter shortcut ── */
  inputEl?.addEventListener("keydown",e=>{
    if(e.key==="Enter"&&(e.ctrlKey||e.metaKey)){
      e.preventDefault();
      document.getElementById("rewrite_btn")?.click();
    }
  });

  /* ── Running state visual feedback (hook for superhuman.js) ── */
  window.__superhumanSetRunning=running=>{
    if(!outEl)return;
    if(running){outEl.classList.add("running");outEl.textContent="";}
    else outEl.classList.remove("running");
  };

  (window.ASTRA??window.HIREX)?.debugLog?.("SUPERHUMAN PAGE LOADED",{version:"v1.0.0"});
});
</script>
</body>
</html>